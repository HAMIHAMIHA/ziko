<template name="payment_container">
  <view class="offer-payment{{ minimum && original_price < minimum ? ' disabled' : '' }}">
    <view class="bourse-alert" wx:if="{{ _show_alert }}">
      <view class="icon icon-alert"></view>
      <view class="nunito_500 bourse-alert_message">{{ _t.bourse_payment_message }}</view>
    </view>

    <view class="payment-message_container">
      <view class="payment-message" wx:if="{{ next_special }}">
        <view class="icon_container">
          <view class="icon icon-alert"></view>
          <view class="icon_text">{{ _t.hurry_top_message }}{{ next_special.conditionValue }}</view>
        </view>
      </view>
    </view>

    <view class="flex-center payment_container">
      <view class="flex-between payment-price_container">
        <view class="icon_container payment-price">
          <view class="icon icon-bigbag"></view>
          <view class="icon_text">
            <text class="price_final">짜{{ _pay_set.reducedTotal && _pay_set.reducedTotal != _pay_set.total ? _pay_set.reducedTotal : _pay_set.total }}</text>
            <text class="payment-price_original" wx:if="{{ _pay_set.reducedTotal && _pay_set.reducedTotal != _pay_set.total }}">짜{{ _pay_set.total }}</text>
          </view>
        </view>
        <view class="icon_container payment-tickets" wx:if="{{ _pay_set.tickets > 0 }}">
          <view class="icon icon-ticket"></view>
          <view class="nunito_600 icon_text payment-tickets_count">X{{ _pay_set.tickets }}</view>
        </view>
      </view>

      <!-- Pay buttons -->
      <!-- Payment not available if offer minimum items not reached -->
      <view class="payment-button disabled" wx:if="{{ _pay_set.minimum.items && _pay_set.minimum.items > _pay_set.cart }}">
        {{ _t.minimum + ': ' + _pay_set.minimum.items }}{{ _pay_set.minimum.items < 1 ? _t.item_units : _t.item_unit }}
      </view>
      <!-- Payment not available if offer minimum price not reached - with deducted price -->
      <view class="payment-button disabled" wx:elif="{{ _pay_set.reducedTotal && _pay_set.minimum.price && _pay_set.minimum.price > _pay_set.reducedTotal }}">
        {{ _t.minimum + ': 짜' + _pay_set.minimum.price }}
      </view>
      <!-- Payment not available if offer minimum price not reached -->
      <view class="payment-button disabled" wx:elif="{{ _pay_set.minimum.price && _pay_set.minimum.price > _pay_set.total }}">
        {{ _t.minimum + ': 짜' + _pay_set.minimum.price }}
      </view>
      <!-- Lock button if there is nothing to pay -->
      <view class="payment-button disabled" wx:elif="{{ _pay_set.total == 0 }}">
        {{ _t.pay }}
      </view>
      <!-- Make as login buttons if user not logged in -->
      <button class="payment-button" bindtap="getUserProfile" wx:elif="{{ !user.name && !wxUser.name }}">
        {{ _t.pay }}
      </button>
      <!-- Mobile logged in -->
      <button class="payment-button" open-type="getPhoneNumber" bindgetphonenumber="getPhoneNumber" wx:elif="{{ !user.id }}">
        {{ _t.pay }}
      </button>
      <!-- Pay button -->
      <button class="payment-button" hover-class="hover-payment-button" bindtap="checkout" wx:else>
        {{ _t.pay }}
      </button>
      <!-- End of Pay buttons -->
    </view>
  </view>
</template>