<view class="container">
  <view class="map" wx:if="{{ map }}">
    <image src="/assets/images/map.jpg" mode="widthFix"></image>
    <view class="map-areas">
      <block wx:for="{{ map_filters }}" wx:key="index" wx:for-item="filter">
        <view 
          class="map-area"
          style="--content-width-: {{ filter.width }}; --content-height-: {{ filter.height }}; --content-x-: {{ filter.xPos }}; --content-y-: {{ filter.yPos }};"
          bindtap="mapClick"
          data-filter-name="{{ filter.name }}"
        ></view>
      </block>
    </view>
  </view>

  <view class="list" wx:else>
    <!-- Scroll Menu -->
    <view class="h-scroll_container scroll-menu">
      <scroll-view class="h-scroll" scroll-x="true" bindscroll="scroll">
        <view class="h-scroll_item zikoland selected" bindtap="switchMenu" data-menu-item="all">
          <view class="icon icon-ziko_right"></view>
        </view>
        <view class="h-scroll_item ziko-kitchen gradient-text" bindtap="switchMenu" data-menu-item="kitchen">
          <view class="icon icon-ziko-kitchen_sides"></view>
        </view>
        <view class="h-scroll_item ziko-garden gradient-text" bindtap="switchMenu" data-menu-item="garden">
          <view class="icon icon-ziko-garden_sides"></view>
        </view>
        <view class="h-scroll_item ziko-cellar gradient-text" bindtap="switchMenu" data-menu-item="cellar">
          <view class="icon icon-ziko-cellar_sides"></view>
        </view>
        <view class="h-scroll_item ziko-pet gradient-text" bindtap="switchMenu" data-menu-item="pet">
          <view class="icon icon-ziko-pet_sides"></view>
        </view>
      </scroll-view>
    </view>

    <dateFilter></dateFilter>
    <offers id="list-offers"></offers>
  </view>

  <!-- popup -->
  <view class="modal {{ map_list ? ' visible' : '' }}" catchtouchmove="preventSlide">
    <view class="modal-backdrop" bindtap="closeMapModal"></view>
    <view class="modal-contents">
      <view class="modal-card">
        <view class="gilroy_700 uppercase h1">{{ map_list.type_name }} offers</view>
        <view class="close-modal" bindtap="closeMapModal"><text class="icon icon-x"></text></view>
        <dateFilter></dateFilter>
        <scroll-view class="modal-offers_container" scroll-y="true">
          <offers id="map-offers"></offers>
        </scroll-view>
      </view>
    </view>
  </view>

  <view class="gilroy_700 uppercase switcher_container">
    <view class="switcher">
      <button class="switch{{ map ? ' selected' : '' }}" bindtap="switchType" data-type="map">explore</button>
      <button class="switch{{ map ? '' : ' selected' }}" bindtap="switchType" data-type="list">list</button>
    </view>
  </view>
</view>