<view class="container">
  <!-- Map View -->
  <view class="map" wx:if="{{ map }}">
    <image src="/assets/images/map.jpg" mode="widthFix"></image>
    <view class="map-areas">
      <block wx:for="{{ _map_filters }}" wx:key="index" wx:for-item="filter">
        <view 
          class="map-area"
          style="--content-width-: {{ filter.width }}; --content-height-: {{ filter.height }}; --content-x-: {{ filter.xPos }}; --content-y-: {{ filter.yPos }};"
          bindtap="filterOffers"
          data-filter-type="map"
          data-filter-group="{{ filter.name }}"
        ></view>
      </block>
    </view>
  </view>
  <!-- End of Map View -->

  <!-- List View -->
  <view class="list" wx:else>
    <!-- Scroll Menu -->
    <view class="h-scroll_container scroll-menu">
      <scroll-view class="h-scroll" scroll-x="true" bindscroll="scroll">
        <view class="h-scroll_item zikoland selected" bindtap="filterOffers" data-filter-type="list" data-filter-group="all">
          <view class="icon icon-ziko_right"></view>
        </view>
        <view class="h-scroll_item ziko-kitchen gradient-text" bindtap="filterOffers" data-filter-type="list" data-filter-group="kitchen">
          <view class="icon icon-ziko-kitchen_sides"></view>
        </view>
        <view class="h-scroll_item ziko-garden gradient-text" bindtap="filterOffers" data-filter-type="list" data-filter-group="garden">
          <view class="icon icon-ziko-garden_sides"></view>
        </view>
        <view class="h-scroll_item ziko-cellar gradient-text" bindtap="filterOffers" data-filter-type="list" data-filter-group="cellar">
          <view class="icon icon-ziko-cellar_sides"></view>
        </view>
        <view class="h-scroll_item ziko-pet gradient-text" bindtap="filterOffers" data-filter-type="list" data-filter-group="pet">
          <view class="icon icon-ziko-pet_sides"></view>
        </view>
      </scroll-view>
    </view>

    <!-- List Contents -->
    <dateFilter id="list_date_filters" offers="{{ offers }}"></dateFilter>
    <offers id="list_offers" offers="{{ offers }}"></offers>
  </view>
  <!-- End of List View -->

  <!-- Map and List switcher -->
  <view class="gilroy_700 uppercase switcher_container">
    <view class="switcher">
      <button
        class="switch{{ map ? ' selected' : '' }}"
        bindtap="switchType"
        data-type="map"
      >
        explore
      </button>
      <button class="switch{{ map ? '' : ' selected' }}" bindtap="switchType" data-type="list">list</button>
    </view>
  </view>
  <!-- End of Map and List switcher -->

  <!-- Map popup -->
  <view class="modal {{ map_type_name ? ' visible' : '' }}" catchtouchmove="preventSlide">
    <view class="modal-backdrop" bindtap="closeMapModal"></view>
    <view class="modal-contents" wx:if="{{ map_type_name }}">
      <view class="modal-card">
        <view class="gilroy_700 uppercase h1">{{ map_type_name }} offers</view>
        <view class="close-modal" bindtap="closeMapModal"><text class="icon icon-x"></text></view>
        <dateFilter id="map_date_filter" offers="{{ offers }}"></dateFilter>
        <scroll-view class="modal-offers_container" scroll-y="true">
          <offers id="map_offers" offers="{{ offers }}"></offers>
        </scroll-view>
      </view>
    </view>
  </view>
  <!-- End of Map popup -->
</view>