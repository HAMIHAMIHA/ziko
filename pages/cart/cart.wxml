<view class="container container-grey container-btn-bottom">
  <view class="white-box order-products_container">
    <view class="nunito_700 header">{{ _t.items }}Items</view>
    <view class="order-products product_container" wx:for="{{ cart.products }}" wx:key="id" wx:for-item="product">
      <view class="flex-between product">
        <view class="flex-start flex-align-start product_left">
          <view class="product-image">
            <image src="/assets/images/productDefault.png" mode="aspectFill" wx:if="{{ product.type == 'pack' }}"></image>
            <image src="/assets/images/productDefault.png" mode="aspectFill" wx:else></image>
          </view>
          <view class="product-info">
            <view class="info_container">
              <view class="nunito_700 product-title">{{ product.name }}pack name</view>
              <!-- Pack Products Detail -->
              <view class="product-detail_container" wx:if="{{ product.type == 'pack' }}">
                <text wx:for="{{ product.products }}" wx:key="*this" wx:for-index="index" wx:for-item="packProduct">
                  <text>{{ packProduct.name }} {{ packProduct.quantity }}x{{ packProduct.weight }}{{ units }}</text>
                  <text wx:if="{{ index < product.products.length - 1 }}">, </text>
                </text>
              </view>
              <!-- End of Pack Products Detail -->

              <!-- Single Products Detail -->
              <view class="product-detail_container" wx:else>
                <text>{{ product.quantity }} x {{ product.weight }}{{ units }}</text>
              </view>
              <!-- End of Single Products Detail -->

              <!-- Available Amount Left -->
              <view class="font_red product-available">
                <text wx:if="{{ product.available == 0 }}">{{ product.available + _t.left_unit }} left</text>
                <text wx:elif="{{ product.available >= 100 }}">{{ product.available + _t.available }} available</text>
                <text wx:else>Only {{ _t.only_left.fst + product.available + _t.only_left.snd }} left!</text>
              </view>
              <!-- End of Available Amount Left -->
            </view>
            <!-- Price -->
            <view class="nunito_600 font_red product-price_container">
              <text class="product-price">¥{{ product.price }}</text>
            </view>
            <!-- End of Price -->
          </view>
        </view>
        <quantity class="flex-start product-quantity" quantity="{{ product.qty }}" bind:changeQty="changeQty" data-idx="{{index}}"></quantity>
      </view>
    </view>
  </view>

  <view class="white-box details_container">
    <!-- Hide for v1 -->
    <view class="detail" wx:if="{{ showing }}">
      <text class="detail_label">{{ _t.use_voucher }}Use Voucher</text>
      <view class="nunito_600 detail_result">
        <text>{{ product.remaining + _t.available }}2 available</text>
        <text class="icon icon-arrow-right"></text>
      </view>
    </view>
    <view class="detail">
      <text class="detail_label">{{ _t.choose_delivery_date }}Choose delivery date</text>
      <picker class="nunito_600 detail_result" bindchange="bindPickerChange" value="{{ index }}" range="{{ item.options }}">
        <view class="picker">
          <text>{{ item.options[index] }}2020-11-10</text>
          <text class="icon icon-arrow"></text>
        </view>
      </picker>
    </view>
    <view class="detail">
      <text class="detail_label">{{ _t.delivery_fee }}Delivery fee</text>
      <text class="detail_result">¥{{ offer.delivery_fee }}10</text>
    </view>
    <view class="nunito_700 detail">
      <text class="detail_label">{{ _t.total }}Total</text>
      <text class="detail_result">¥{{ offer.total }}1000</text>
    </view>
  </view>

  <!-- Hide for v1 -->
  <view class="white-box details_container" wx:if="{{ showing }}">
    <view class="detail">
      <text class="detail_label">{{ _t.lottery_tickets }}Lottery tickets</text>
      <text class="detail_result">x{{ offer.tickets }}3</text>
    </view>
    <view class="detail">
      <text class="detail_label">{{ _t.fidelity_points }}Fidelity points</text>
      <text class="detail_result">+{{ offer.fidelity_points }}30</text>
    </view>
  </view>

  <view class="white-box details_container inputs_container">
    <view class="detail address">
      <text class="detail_label">{{ _t.address }}Address</text>
      <view class="detail_input">
        <!-- TODO navigate to address list -->
        <view class="input" bindtap="chooseAddress">
          <view class="flex-between">
            <text>{{ offer.address.type }}Home</text>
            <text class="icon icon-arrow"></text>
          </view>
        </view>
        <text class="detail_note">{{ offer.address.address }}水电路1200弄3号401室</text>
      </view>
    </view>

    <view class="detail">
      <text class="detail_label">{{ _t.phone_no }}Phone No.</text>
      <view class="detail_input"><input class="input" type="number" value="{{ offer.address.phone_no }}" /></view>
    </view>

    <view class="detail">
      <text class="detail_label">{{ _t.contact_label }}Contact</text>
      <view class="detail_input"><input class="input" type="text"  value="{{ offer.address.contact }}"/></view>
    </view>
  </view>

  <view class="white-box details_container inputs_container" bindtap="toggleCheck">
    <view class="detail checkbox-container fapiao">
      <text class="detail_label">{{ _t.fapiao }}Fapiao</text>
      <view class="flex-between detail_input">
        <input class="input" type="text"  disabled="true" value="{{ user.fapiao }}"/>
        <view class="checkbox{{ fapiao ? ' checked' : '' }}">
          <text class="icon icon-check"></text>
        </view>
      </view>
    </view>
  </view>

  <view class="white-box details_container inputs_container">
    <view class="detail">
      <text class="detail_label">{{ _t.comment }}Comment</text>
      <view class="detail_input"><input class="input" type="text" /></view>
    </view>
  </view>

  <view class="white-box contact-box">
    <view class="">{{ _t.checkout_message }}If you need to change delivery date or other information after purchase please contact the Customer service</view>
    <view class="contact-button_container">
      <button class="contact-button" hover-class="none" open-type="contact">
        <text class="icon icon-headset"></text>
        <text class="nunito_600">{{ _t.contact_customer_hero }}Contact our customer hero!</text>
      </button>
    </view>
  </view>

  <view class="btn-bottom">
    <button class="nunito_600" hover-class="none" bindtap="pay">{{ _t.pay }}Pay</button>
  </view>
</view>