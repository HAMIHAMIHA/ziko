<view class="container">
  <!-- List View -->
  <view class="list">
    <!-- Scroll Menu -->
    <view class="h-scroll_container scroll-menu_community">
      <scroll-view class="h-scroll" scroll-x="true">
        <block wx:for="{{ _filters.list }}" wx:key="filter_group" wx:for-item="filter">
          <view
            class="h-scroll_item {{ filter.class_name }} {{ filter_group == filter.filter_group ? ' selected' : '' }}"
            bindtap="filterOffers"
            data-filter_type="list"
            data-filter_group="{{ filter.filter_group }}"
            data-filter_id="{{ filter.id }}"
          >
            <view class="icon icon-{{ filter.icon }}"></view>
          </view>
        </block>
      </scroll-view>
    </view>

    <!-- List Contents -->
    <dateFilter
      id="list_date_filters"
      days="{{ days }}"
      bind:filterOffers="filterOffers"
    ></dateFilter>

    <view class="offers_container">
      <view class="gilroy_700 offers_list" wx:if="{{ offers.length == 0 }}">
        {{ _t.no_offers }}
      </view>

      <view class="gilroy_700 offers_list">
        <!-- Card for each offer -->
        <view class="offer_container"
          wx:for="{{ offers }}"
          wx:for-item="offer"
          wx:key="id"
          bindtap="toLottery"
          data-community="{{ offer.community.id }}"
          data-offer-id="{{ offer.id }}"
        >
          <!-- Banner image of card -->
          <view class="offer-banner">
            <view class="offer-banner_image">
              <image src="{{ offer.banner }}" mode="widthFix" lazy-load="true"></image>
            </view>
            <view class="offer-banner_tag">
              <view class="icon {{ 'icon-ziko-' + _communities[offer.community.id] + '_right'}}"></view>
            </view>
          </view>
          <!-- End of banner -->

          <view class="offer-detail_container">
            <view class="uppercase offer-detail_title">{{ offer.name[_language] }}</view>
            <view class="flex-between offer-detail_content">
              <!-- Detail - Info -->
              <view class="flex-between offer-specials">
                <view class="icon_container lottery">
                  <view class="icon icon-ticket"></view>
                  <view class="icon_text">{{ offer.lotteries.draws }} {{ _t.tickets }}</view>
                </view>

                <view class="offer-ticket_remaining">
                  <text class="nunito ticket-count_label">{{ _t.remaining_draws }}: </text>
                  <text class="nunito_700 ticket-count_text">{{ offer.lotteries.remaining_draws }}</text>
                </view>
              </view>
              <!-- End of Detail - Info -->

              <view class="flex-center offer-ticket_win" wx:if="{{ offer.lotteries.win }}">
                <text class="ticket_icon icon icon-crown"></text>
                <text class="font_red ticket_count">{{ _t.you_win }}</text>
              </view>
            </view>

            <!-- Display for offers waiting -->
            <view class="offer-detail_content offer-closed" wx:if="{{ offer.ended }}">
              <view class="uppercase closed">{{ _t.closed }}</view>
            </view>
            <!-- End of offers waiting -->

            <!-- Current Status -->
            <view class="uppercase offer-detail_content offer-started" wx:else>
              <view class="flex-between offer-countdown">
                <view class="flex-between_left">
                  {{ _t.remaining_time }}
                </view>
                <view class="flex-between_rt">
                  <countdown class="timer" end-time="{{ offer.endingDate }}"></countdown>
                </view>
              </view>
            </view>
            <!-- End of Current Status -->
          </view>
        </view>
      </view>
    </view>
  </view>
  <!-- End of List View -->
</view>

<lottery-draw id="lottery_modal"></lottery-draw>